<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Who Wants to Be a Millionaire</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
</head>
<body>
    <div class="game-container">
        <div class="spotlight-container">
            <div class="spotlight"></div>
            <div class="spotlight-main"></div>
            <div class="spotlight"></div>
        </div>
        <div class="stats-container">
            <div class="stat-item">Score: <span id="scoreCount" class="score-text">0</span></div>
            <div class="stat-item">Question: <span id="questionCount">0</span> / <span id="totalQuestions">0</span></div>
            <div class="stat-item">Correct: <span id="correctCount">0</span></div>
            <div class="stat-item">Wrong: <span id="wrongCount">0</span></div>
            <div class="stat-item">$<span id="totalMoney">0</span></div>
        </div>
        <div class="top-section">
            <div class="question-box">
                <p id="question">Question will appear here</p>
            </div>
            <div class="money-ladder">
                <ul id="moneyLadder">
                    <li>$1,000,000</li>
                    <li>$500,000</li>
                    <li>$250,000</li>
                    <li>$100,000</li>
                    <li>$50,000</li>
                    <li>$25,000</li>
                    <li>$15,000</li>
                    <li>$10,000</li>
                    <li>$7,500</li>
                    <li>$5,000</li>
                    <li>$2,500</li>
                    <li>$1,500</li>
                    <li>$1,000</li>
                </ul>
            </div>
        </div>
        <div class="game-controls">
            <div class="options-container">
                <button class="option" onclick="checkAnswer(0)">A: </button>
                <button class="option" onclick="checkAnswer(1)">B: </button>
                <button class="option" onclick="checkAnswer(2)">C: </button>
                <button class="option" onclick="checkAnswer(3)">D: </button>
            </div>
            <div class="hints-container">
                <button class="hint-btn" onclick="showHint(0)">50:50</button>
                <button class="hint-btn" onclick="showHint(1)">50:50</button>
            </div>
        </div>
    </div>
    <script src="js/howler.min.js"></script>
    <script src="animations.js"></script>
    <script src="sounds.js"></script>
    <script src="animations-sprite.js"></script>
    <script>
        // 在遊戲頁面加載時先顯示倒數計時
        window.addEventListener('load', function() {
            // 創建倒數計時覆蓋層
            const overlay = document.createElement('div');
            overlay.className = 'countdown-overlay';
            document.body.appendChild(overlay);

            // 開始倒數
            let count = 3;
            function countdown() {
                if (count > 0) {
                    overlay.innerHTML = `<div class="countdown-number">${count}</div>`;
                    count--;
                    setTimeout(countdown, 1000);
                } else {
                    overlay.innerHTML = `<div class="countdown-number">GO!</div>`;
                    // 播放開始音效
                    SoundManager.playStartBGM();
                    
                    setTimeout(() => {
                        overlay.remove();
                        // 監聽開始音效結束事件
                        SoundManager.sounds.start_bgm.once('end', function() {
                            // 開始音效結束後播放主背景音樂
                            SoundManager.playMainBGM();
                        });
                    }, 1000);
                }
            }
            countdown();
        });

        // 在 index.html 中添加全局變量來存儲動畫實例
        let bugAnimation;
        let bugCorrectAnimation;
        let bugWrongAnimation;

        // 載入一般動畫
        fetch('images/bug-talking.json')
            .then(response => response.json())
            .then(data => {
                bugAnimation = new SpriteAnimation('images/bug-talking.png', data, {
                    position: 'absolute',
                    top: '0%',
                    left: '0',
                    width: '450px',
                    height: '100%',
                    zIndex: '1'
                });
                const topSection = document.querySelector('.top-section');
                bugAnimation.canvas = bugAnimation.createCanvas(topSection);
            });

        // 載入正確答案動畫
        fetch('images/bug-correct.json')
            .then(response => response.json())
            .then(data => {
                bugCorrectAnimation = new SpriteAnimation('images/bug-correct.png', data, {
                    position: 'absolute',
                    top: '0%',
                    left: '0',
                    width: '450px',
                    height: '100%',
                    zIndex: '1'
                });
                const topSection = document.querySelector('.top-section');
                bugCorrectAnimation.canvas = bugCorrectAnimation.createCanvas(topSection);
                // 初始時隱藏正確動畫
                bugCorrectAnimation.canvas.style.display = 'none';
            });

        // 載入錯誤答案動畫
        fetch('images/bug-wrong.json')
            .then(response => response.json())
            .then(data => {
                bugWrongAnimation = new SpriteAnimation('images/bug-wrong.png', data, {
                    position: 'absolute',
                    top: '0%',
                    left: '0',
                    width: '450px',
                    height: '100%',
                    zIndex: '1'
                });
                const topSection = document.querySelector('.top-section');
                bugWrongAnimation.canvas = bugWrongAnimation.createCanvas(topSection);
                // 初始時隱藏錯誤動畫
                bugWrongAnimation.canvas.style.display = 'none';
            });
    </script>
    <script src="script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tsparticles/confetti@3.0.3/tsparticles.confetti.bundle.min.js"></script>
</body>
</html> 